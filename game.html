
<script type="text/javascript">


  //Variable Declarations


  var guess, message, userGuess, today, todayMs, timeIncrements, durationsAlive, person, playerInput, game;
  var timesGuessed   = 0;
  var quit           = 0;
  var quitting       = 0;
  today              = new Date();
  todayMs            = today.getTime();


  //Object Declarations:


  //Created new person object that stores the user's birthdate.
  function Player(birthInput) {
    //Set birthday and convert to milliseconds using input from user found split paramater on stackoverflow
    this.birthdate    = new Date(birthInput[2], birthInput[0]-1, birthInput[1], birthInput[3], birthInput[4]),
    this.birthMs      = this.birthdate.getTime(),
    //Find difference between dates and convert to seconds, minutes, hours and days
    this.aliveMs      = todayMs - this.birthMs,
    this.aliveSeconds = Math.floor(this.aliveMs/1000),
    this.aliveMinutes = Math.floor(this.aliveSeconds/60),
    this.aliveHours   = Math.floor(this.aliveMinutes/60),
    this.aliveDays    = Math.floor(this.aliveHours/24)
  }

  function Game(timeInc, durations) {
    this.timeIncrements = timeInc;
    this.durationsAlive = durations;
    this.counterMax     = this.durationsAlive.length;
    this.counter        = 0;

    /*call the guessing function to ask user to guess, seconds, minutes, hours,
    and days alive.*/
    this.play = function() {
      while (quitting != 1 && this.counter < this.counterMax) {
        guess(this.timeIncrements[this.counter] , this.durationsAlive[this.counter]);
        this.counter ++;
      }
    }
  }



  /*****Main function to guess the duration. timeString fills in duration units;
   hours days etc. Runs through loop prompting and incrementing the timesGuessed
   until the correct answer is given or the user inputs "quit".*****/
  guess = function(timeString, duration) {
    userGuess = prompt("You were born on " + person.birthdate + ". How many " + timeString + " do you think you have been alive? Type quit to quit the game.");
    if (userGuess == duration) {
    message = "Congrats that is correct";
    } else {
      while (userGuess != "quit" &&  userGuess != duration){
          if (userGuess < duration) {
          message = "Try again, but think bigger";
          } else {
            message = "Try again, but not so high";
          }
        alert(message);
        timesGuessed += 1
        userGuess = prompt("You were born on " + person.birthdate + ". How many " + timeString + " do you think you have been alive? Type quit to quit the game.");
      }
      if (userGuess == "quit") {
        message = "Quitting already?"
        timesGuessed -= 1;
        quitting = 1;
      } else {
        message = "Congrats that is correct!";
        quitting = 0;
      }
    }
    //increment the times guessed and print message to screen.
    timesGuessed ++;
    alert(message);
  }



  //Gather player input, set factors for game, call game method and display results.

  playerInput     = prompt("what is your birthday? If unsure about time just put in 12:00:", "mm/dd/year hh:mm").split(/\W/);
  person          = new Player(playerInput);
  timeIncrements  = ["days","hours","minutes","seconds"];
  durationsAlive  = [person.aliveDays , person.aliveHours , person.aliveMinutes , person.aliveSeconds];
  game            = new Game(timeIncrements, durationsAlive);

  game.play();

  //let the user know how many tries it took them to find the answer.
  alert("It took you " + timesGuessed + " guesses to find the answers.");

</script>
